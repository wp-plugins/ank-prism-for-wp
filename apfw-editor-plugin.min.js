(function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};var a=[];if(typeof apfw_lang!==undefined){a=apfw_lang}tinymce.PluginManager.add("afpw_assist_button",function(c,b){c.addButton("afpw_assist_button",{title:"Prism Assistant",text:"Prism",type:false,icon:"apfw-icon",onclick:function(){c.windowManager.open({title:"Prism Syntax Highlighter Assistant",width:550,height:450,body:[{type:"listbox",name:"language",label:"Language* :",values:a,value:a[0].value},{type:"checkbox",name:"lineNumbers",label:"Show Line numbers:",checked:true},{type:"textbox",name:"lineNumStart",label:"Start Line Number From:"},{type:"textbox",name:"highLight",label:"Lines to Highlight:"},{type:"textbox",name:"code",label:"Paste Code*:",multiline:true,minHeight:250,value:"",onclick:function(d){jQuery(d.target).css("border-color","")}},{type:"label",name:"info",label:"Please Note: :",text:"These options works only if enabled on Plugin Option Page.",style:"font-size:smaller"}],onsubmit:function(j){var l="";var d="";var g="";var h=j.data.code.trim();if(h===""){var i=this._id;var f=jQuery("#"+i+"-body").find(".mce-formitem textarea");jQuery(f.get(0)).css("border-color","red").focus();return false}if(j.data.lineNumbers){l=' class="line-numbers" '}if(j.data.lineNumStart&&j.data.lineNumbers){d=' data-start="'+j.data.lineNumStart+'" '}if(j.data.highLight){g=' data-line="'+j.data.highLight+'" '}var k=j.data.language;h=h.replace(/</g,"&lt;").replace(/>/g,"&gt;");c.insertContent("<pre"+g+l+d+'><code class="language-'+k+'">'+h+"</code></pre>")}})}})})})();